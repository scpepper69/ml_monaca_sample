<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: content: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
  <script src="components/loader.js"></script>
  <link rel="stylesheet" href="components/loader.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="lib/jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.css">
</head>

<body data-gr-c-s-loaded="true" class="ui-mobile-viewport ui-overlay-a" style="" data-feedly-mini="yes">
  <!-- Start of first page: #one -->
  <div data-role="page" id="one" data-url="one" tabindex="0" class="ui-page ui-page-theme-a ui-page-active" style="">
    <div data-role="header" role="banner" class="ui-header ui-bar-inherit">
      <h1 class="ui-title" role="heading" aria-level="2">Predict Robot Face</h1>
    </div><!-- /header -->

    <div role="main" class="ui-content" style="background-color:#f8dce0">
      <img border="0" src="img/eye_catch_004.jpg" class="inline-img">
      <p><a href="#two" class="ui-btn ui-shadow ui-corner-all">Open Application</a></p>
      <p><a href="#popup" class="ui-btn ui-shadow ui-corner-all" data-rel="dialog" data-transition="pop">Information</a></p>
    </div><!-- /content -->
    <div class="container-b">
      <div class="inline-music">
        <button onclick="playSound()">Play</button>
      </div>
      <div class="inline-music">
        <button onclick="pauseSound()">Pause</button>
      </div>
      <div class="inline-music">
        <button onclick="stopSound()">Stop</button>
      </div>
      <div>
        <p hidden id="audio_position"></p>
      </div>
    </div>
    <div data-role="footer" data-theme="a" role="contentinfo" class="ui-footer ui-bar-a">
      <h4 class="ui-title" role="heading" aria-level="1">© 2019 scpepper.</h4>
    </div><!-- /footer -->
  </div><!-- /page one -->

  <!-- Start of second page: #two -->
  <div data-role="page" id="two" data-theme="a" data-url="two">
    <div data-role="header">
      <h1>Predict Robot Face</h1>
    </div><!-- /header -->

    <div role="main" class="ui-content" style="background-color:#f8dce0">
      <div class="container-b">
        <div class="btn-toolbar">
          <img id="myImage" class="inline-img">
        </div>
      </div>
      <div class="container-b">
        <div class="output">
          <ul id="console" class="list-unstyled">
            <h4>Please load a photo to predict.</h4>
          </ul>
        </div>
      </div>

      <div class="container-b">
        <div class="btn-toolbar">
          <div class="inline-block_test">
            <button id="select-button" class="btn btn-outline-dark">Select a Photo</button>
          </div>
          <div class="inline-block_test">
            <button id="take-button" class="btn btn-outline-dark">Take a Photo</button>
          </div>
        </div>
        <div class="btn-toolbar">
          <div>
            <button id="predict-button" class="btn btn-outline-dark">Execute Prediction</button>
          </div>
        </div>
      </div>
      <p><a href="#one" data-direction="reverse" class="ui-btn ui-shadow ui-corner-all ui-btn-b">Back to Top</a></p>
    </div><!-- /content -->

    <div data-role="footer">
      <h4>© 2019 scpepper.</h4>
    </div><!-- /footer -->
  </div><!-- /page two -->

  <!-- Start of third page: #popup -->
  <div data-role="page" id="popup" data-url="popup">
    <div data-role="header" data-theme="b">
      <h1>Information</h1>
    </div><!-- /header -->

    <div role="main" class="ui-content">
      <h2>About This Application</h2>
      <p>This application predicts what robot's face the photo data is based on the prediction model generated by the Deep Learning framework TensorFlow.</p>
      <p>This application was created by sccpepper using a mobile application development framework monaca.</p>
      <p>If you have any comments, please contact me from my blog below.</p>
      <p><a href="https://www.scpepper.tokyo" target="_blank">Origin of Taste</a></p>
      <p><a href="#one" data-rel="back" class="ui-btn ui-shadow ui-corner-all ui-btn-inline ui-icon-back ui-btn-icon-left">Back
          to Top</a></p>
    </div><!-- /content -->

    <div data-role="footer">
      <h4>© 2019 scpepper.</h4>
    </div><!-- /footer -->
  </div><!-- /page popup -->

  <div class="ui-loader ui-corner-all ui-body-a ui-loader-default"><span class="ui-icon-loading"></span>
    <h1>loading</h1>
  </div>
  <div id="weava-permanent-marker" date="1538710288557"></div>
  <div id="feedly-mini" title="feedly Mini tookit"></div>
  <div id="weava-ui-wrapper">
    <div class="weava-drop-area-wrapper">
      <div class="weava-drop-area"></div>
      <div class="weava-drop-area-text"></div>
    </div>
  </div>

  <script>
    var media = null;
    var mediaTimer = null;
    var srcFile = "Sign.mp3";

    document.addEventListener("deviceready", onDeviceReady, false);
    function onDeviceReady() {
      console.log("ready");
      media = new Media (getPath() + srcFile , onSuccess, onError);
    }
    function getPath() {
      var str = location.pathname;
      var i = str.lastIndexOf('/');
      return str.substring(0,i+1);
    }
    function playSound(){
      // play the media file one time.
      media.play({numberOfLoops: 0});
      // start the timer
      if (mediaTimer == null) {
        mediaTimer = setInterval(function() {
        // Return a current playback position
          media.getCurrentPosition(
            //A Callback function if it's success
            function(position) {
              if (position > -1) {
                //If the playback stops at "-0.001" position, set the timer to 0.
                if(position == -0.001){
                  position = 0;
                }
                setAudioPosition((position) + " sec");
              }
            },
            //A callback function in case of failure
            function(error) {
              console.log("Error getting pos=" + error);
              setAudioPosition("Error: " + error);
            }
          );
        }, 1000);
      }
    }
    function pauseSound(){
      if (media) {
        media.pause();
      }
    }
    function stopSound(){
      if (media) {
        media.stop();
      }
    }
    function setAudioPosition(position) {
      document.getElementById('audio_position').innerHTML = position;
    }
    function onSuccess(){
      console.log("Successfully initialize a media file.");
    }
    function onError(error){
      console.log("Failed to initialize a media file. [ Error code: " + error.code + ", Error message: " + error.message + "]");
    }
    </script>

  <!-- <script src="js/tensorflow.min.js"></script> -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.2.3/dist/tf.min.js"></script>
  <script src="lib/jquery/jquery-1.12.4.min.js"></script>
  <script src="lib/jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.js"></script>
  <script src="js/jquery.min.js"></script>
  <script src="js/predict.js"></script>

</body>
</html>
